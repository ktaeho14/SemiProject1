DROP TABLE REGLOST;
CREATE TABLE REGLOST(
	NUM    	  NUMBER        CONSTRAINT PK_LOST_ARTICLE_NO PRIMARY KEY,
	TITLE     VARCHAR(2000) NOT NULL,
	WRITER    VARCHAR(500)   NOT NULL,--회원정보테이블과 외래키관계로 사용될것(추후 변경해야될 것)
	TEL       VARCHAR(40)   NOT NULL,
	LOSTDATE  DATE          NOT NULL,
	PROVINCE  VARCHAR(200)  NOT NULL,--도/특별시/광역시
	RESERV    VARCHAR(2000) NOT NULL,--나머지 주소
	LOSTPLACE VARCHAR(2000) NOT NULL,
	LOSTPIC   VARCHAR(2000) NOT NULL,
	DETAIL    VARCHAR(2000) DEFAULT '-',
	SPECIES   VARCHAR(100)  NOT NULL,
	CATE      VARCHAR(2000) NOT NULL,
	ETC       VARCHAR(2000) NOT NULL,
	WATCH     NUMBER	    NOT NULL--조회수
);

SELECT * FROM REGLOST;

COMMENT ON COLUMN REGLOST.NUM IS '유기동물 등록글 번호';
COMMENT ON COLUMN REGLOST.TITLE IS '유기동물 등록글 제목';
COMMENT ON COLUMN REGLOST.WRITER IS '글작성자';
COMMENT ON COLUMN REGLOST.TEL IS '작성자 연락처';
COMMENT ON COLUMN REGLOST.LOSTDATE IS '잃어버린 날짜';
COMMENT ON COLUMN REGLOST.PROVINCE IS '잃어버린 장소-도/특별시/광역시';
COMMENT ON COLUMN REGLOST.RESERV IS '잃어버린 장소-나머지 주소';
COMMENT ON COLUMN REGLOST.LOSTPLACE IS '잃어버린 장소';
COMMENT ON COLUMN REGLOST.LOSTPIC IS '유기동물 사진 저장위치';
COMMENT ON COLUMN REGLOST.DETAIL IS '유기동물 특이사항';
COMMENT ON COLUMN REGLOST.SPECIES IS '유기동물 종';
COMMENT ON COLUMN REGLOST.CATE IS '유기동물 종류';
COMMENT ON COLUMN REGLOST.ETC IS '기타사항 기재';
COMMENT ON COLUMN REGLOST.WATCH IS '조회수';

SELECT * FROM USER_COL_COMMENTS WHERE TABLE_NAME='REGLOST';

DROP   SEQUENCE LOST_ARTICLE_SEQ;
CREATE SEQUENCE LOST_ARTICLE_SEQ NOCACHE;

INSERT INTO REGLOST
VALUES(LOST_ARTICLE_SEQ.NEXTVAL,'테스트글1','ADMIN','010-1234-5678','21/06/01','서울특별시','강남구 역삼동','서울특별시 강남구 역삼동','lost1.jpg','특이사항1','강아지','삽살개1','기타사항1',0);
INSERT INTO REGLOST
VALUES(LOST_ARTICLE_SEQ.NEXTVAL,'테스트글2','ADMIN','010-1234-5678','21/06/01','서울특별시','강남구 역삼동','서울특별시 강남구 역삼동','lost2.jpg','특이사항1','강아지','삽살개2','기타사항1',0);
INSERT INTO REGLOST
VALUES(LOST_ARTICLE_SEQ.NEXTVAL,'테스트글3','ADMIN','010-1234-5678','21/06/01','서울특별시','강남구 역삼동','서울특별시 강남구 역삼동','lost3.jpg','특이사항1','강아지','삽살개3','기타사항1',0);
INSERT INTO REGLOST
VALUES(LOST_ARTICLE_SEQ.NEXTVAL,'테스트글4','ADMIN','010-1234-5678','21/06/01','서울특별시','강남구 역삼동','서울특별시 강남구 역삼동','lost4.jpg','특이사항1','강아지','삽살개4','기타사항1',0);
INSERT INTO REGLOST
VALUES(LOST_ARTICLE_SEQ.NEXTVAL,'테스트글5','ADMIN','010-1234-5678','21/06/01','서울특별시','강남구 역삼동','서울특별시 강남구 역삼동','lost5.jpg','특이사항1','강아지','삽살개5','기타사항1',0);
INSERT INTO REGLOST
VALUES(LOST_ARTICLE_SEQ.NEXTVAL,'테스트글6','ADMIN','010-1234-5678','21/06/01','서울특별시','강남구 역삼동','서울특별시 강남구 역삼동','lost6.jpg','특이사항1','고양이','삼색고양이1','기타사항1',0);
INSERT INTO REGLOST
VALUES(LOST_ARTICLE_SEQ.NEXTVAL,'테스트글7','ADMIN','010-1234-5678','21/06/01','서울특별시','강남구 역삼동','서울특별시 강남구 역삼동','lost7.jpg','특이사항1','고양이','삼색고양이2','기타사항1',0);
INSERT INTO REGLOST
VALUES(LOST_ARTICLE_SEQ.NEXTVAL,'테스트글8','ADMIN','010-1234-5678','21/06/01','서울특별시','강남구 역삼동','서울특별시 강남구 역삼동','lost8.jpg','특이사항1','고양이','삼색고양이3','기타사항1',0);
INSERT INTO REGLOST
VALUES(LOST_ARTICLE_SEQ.NEXTVAL,'테스트글9','ADMIN','010-1234-5678','21/06/01','서울특별시','강남구 역삼동','서울특별시 강남구 역삼동','lost9.jpg','특이사항1','고양이','삼색고양이4','기타사항1',0);

INSERT INTO REGLOST
VALUES(LOST_ARTICLE_SEQ.NEXTVAL,'테스트글10','ADMIN','010-1234-5678','21/06/01','서울특별시','강남구 역삼동','서울특별시 강남구 역삼동','lost10.jpg','특이사항1','고양이','삼색고양이5','기타사항1',0);
INSERT INTO REGLOST
VALUES(LOST_ARTICLE_SEQ.NEXTVAL,'테스트글11','ADMIN','010-1234-5678','21/06/01','서울특별시','강남구 역삼동','서울특별시 강남구 역삼동','lost11.jpg','특이사항1','강아지','삽살개6','기타사항1',0);
INSERT INTO REGLOST
VALUES(LOST_ARTICLE_SEQ.NEXTVAL,'테스트글12','ADMIN','010-1234-5678','21/06/01','서울특별시','강남구 역삼동','서울특별시 강남구 역삼동','lost12.jpg','특이사항1','강아지','삽살개7','기타사항1',0);
INSERT INTO REGLOST
VALUES(LOST_ARTICLE_SEQ.NEXTVAL,'테스트글13','ADMIN','010-1234-5678','21/06/01','서울특별시','강남구 역삼동','서울특별시 강남구 역삼동','lost13.jpg','특이사항1','강아지','삽살개8','기타사항1',0);
INSERT INTO REGLOST
VALUES(LOST_ARTICLE_SEQ.NEXTVAL,'테스트글14','ADMIN','010-1234-5678','21/06/01','서울특별시','강남구 역삼동','서울특별시 강남구 역삼동','lost14.jpg','특이사항1','강아지','삽살개9','기타사항1',0);
INSERT INTO REGLOST
VALUES(LOST_ARTICLE_SEQ.NEXTVAL,'테스트글15','ADMIN','010-1234-5678','21/06/01','서울특별시','강남구 역삼동','서울특별시 강남구 역삼동','lost15.jpg','특이사항1','강아지','삽살개10','기타사항1',0);
INSERT INTO REGLOST
VALUES(LOST_ARTICLE_SEQ.NEXTVAL,'테스트글16','ADMIN','010-1234-5678','21/06/01','서울특별시','강남구 역삼동','서울특별시 강남구 역삼동','lost16.jpg','특이사항1','고양이','삼색고양이6','기타사항1',0);
INSERT INTO REGLOST
VALUES(LOST_ARTICLE_SEQ.NEXTVAL,'테스트글17','ADMIN','010-1234-5678','21/06/01','서울특별시','강남구 역삼동','서울특별시 강남구 역삼동','lost17.jpg','특이사항1','고양이','삼색고양이7','기타사항1',0);
INSERT INTO REGLOST
VALUES(LOST_ARTICLE_SEQ.NEXTVAL,'테스트글18','ADMIN','010-1234-5678','21/06/01','서울특별시','강남구 역삼동','서울특별시 강남구 역삼동','lost18.jpg','특이사항1','고양이','삼색고양이8','기타사항1',0);


SELECT NUM, WRITER, TITLE, TEL, LOSTDATE, PROVINCE, RESERV, LOSTPLACE,LOSTPIC, DETAIL, SPECIES, CATE, ETC, WATCH
FROM   REGLOST;

SELECT COUNT(NUM)
FROM   REGLOST;

SELECT * FROM (SELECT ROWNUM CNT, NO, WRITER, TITLE, TEL, LOSTDATE, PROVINCE, RESERV, LOSTPLACE,LOSTPIC, DETAIL, SPECIES, CATE, ETC, WATCH FROM (SELECT * FROM REGLOST ORDER BY NO DESC)) WHERE CNT BETWEEN 10 AND 18;

UPDATE REGLOST SET WATCH=(WATCH+1) WHERE NO=1;

--지역별 조회
SELECT P.* FROM
(SELECT ROWNUM R, PROV.* FROM
(SELECT NUM, WRITER, TITLE, TEL, LOSTDATE, PROVINCE, RESERV, LOSTPLACE,LOSTPIC, DETAIL, SPECIES, CATE, ETC, WATCH
FROM   REGLOST
WHERE  PROVINCE='서울특별시'
ORDER  BY NUM DESC) PROV)P
WHERE P.R BETWEEN 1 AND 9;

SELECT COUNT(NUM)
FROM (SELECT NUM, WRITER, TITLE, TEL, LOSTDATE, PROVINCE, RESERV, LOSTPLACE,LOSTPIC, DETAIL, SPECIES, CATE, ETC, WATCH
FROM   REGLOST
WHERE  PROVINCE='서울특별시');

SELECT COUNT(NUM) FROM
(SELECT P.* FROM
(SELECT ROWNUM R, PROV.* FROM
(SELECT NUM, WRITER, TITLE, TEL, LOSTDATE, PROVINCE, RESERV, LOSTPLACE,LOSTPIC, DETAIL, SPECIES, CATE, ETC, WATCH
FROM   REGLOST
WHERE  PROVINCE='서울특별시'
ORDER  BY NUM DESC) PROV)P);

--회원별 조회
SELECT NUM, WRITER, TITLE, TEL, LOSTDATE, PROVINCE, RESERV, LOSTPLACE,LOSTPIC, DETAIL, SPECIES, CATE, ETC, WATCH
FROM   REGLOST
WHERE  WRITER='ADMIN';

SELECT DATA.* FROM
(SELECT ROWNUM R, MINE.* FROM
(SELECT NUM, WRITER, TITLE, TEL, LOSTDATE, PROVINCE, RESERV, LOSTPLACE,LOSTPIC, DETAIL, SPECIES, CATE, ETC, WATCH
FROM   REGLOST
WHERE  WRITER='ADMIN'
ORDER  BY NUM DESC) MINE) DATA;

SELECT DATA.* FROM
(SELECT ROWNUM R, MINE.* FROM
(SELECT NUM, WRITER, TITLE, TEL, LOSTDATE, PROVINCE, RESERV, LOSTPLACE,LOSTPIC, DETAIL, SPECIES, CATE, ETC, WATCH
FROM   REGLOST
WHERE  WRITER='ADMIN'
ORDER  BY NUM DESC) MINE) DATA
WHERE  DATA.R BETWEEN 1 AND 9;


SELECT COUNT(NUM)
FROM   (SELECT NUM, WRITER, TITLE, TEL, LOSTDATE, PROVINCE, RESERV, LOSTPLACE,LOSTPIC, DETAIL, SPECIES, CATE, ETC, WATCH
FROM   REGLOST
WHERE  WRITER='ADMIN');